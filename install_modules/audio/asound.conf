# Define the three input signals as separate PCM devices
pcm.MPD_in {
    type plug
    slave.pcm "dmixer"
}

pcm.SpotCon_in {
    type plug
    slave.pcm "dmixer"
}

pcm.SysSound_in {
    type plug
    slave.pcm "dmixer"
}

# Define the dmix plugin to mix the inputs
pcm.dmixer {
    type dmix
    ipc_key 1234            # Unique key for shared memory
    ipc_perm 0666           # Permissions for access
    slave {
        pcm "hw:0,0"        # Physical output device
        rate 44100          # Output sample rate
        format S16_LE       # Output format (16-bit, little-endian)
        channels 2          # Stereo output
        period_time 0       # Auto-calculate period time
        period_size 1024    # Size of each period (in frames)
        buffer_size 4096    # Total buffer size (in frames)
    }
    bindings {
        0 0                 # Map left channel
        1 1                 # Map right channel
    }
}

# Define the default PCM device to use the dmix setup
pcm.!default {
    type plug
    slave.pcm "dmixer"
}

# Define a default control interface for ALSA
ctl.!default {
    type hw
    card 0
}
