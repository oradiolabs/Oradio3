Legenda===================
T betekent TODO
R betekent reworked
V betekent rework akkoord
==========================

YYYY-MM-DD============================================================================================================================

MESSAGES:
T - Messages 'opschonen', overwegen om json schemas te gebruiken.
	De gekozen message format en definities zijn in de praktijk niet altijd even logisch.
	Voordeel is onderhoudbaarheid, en met json schemas robuust tegen send/receive mismatches

DEBUG / ERRORS:
T - oradio_log.debug/info/warning/error messages nakijken of ze zinvol zijn en op juiste plek gebruikt worden.
	Tijdens ontwikkeling is er vaak exctra debug logging ingeslopen om te controleren of de code werkt als verwacht.
	Echter, de vraag is of als de module af is deze extra debug logging weer opgeruimd is.
T - Default log level van modules die af zijn op 'info' zetten.
	De logfile stroomt nu vol, ook met debug info van modules die niet gedebugged hoeven worden, info genoeg is.
	Voordeel is dat oradio.log nuttiger wordt omdat eht geen overbodige regels bevat
	Voordeel is ook dat Oradio minder cycles nodig heeft om te loggen (maar we hebben geen performance probleem)
	Nadeel is dat Ã¡ls er iets fout gaat, de logfile mogelijk te weining informatie bevat om de oorzaak van de fout op te sporen
T - Oradio exception introduceren, inclusief handler die gepaste akties neemt.
	Nu worden fouten alleen aamr gelogd, en als we geluk hebben naar RMS gestuurd.
	De fout heeft vaak gevolgen voor het gedrag van de Oradio, waardoor de Oradio onverwachte dingen doet.
	Als de error een Oradio-exception triggert inclusief extra informatie kan de exception handler in extrmis de Oradio opnieuw opstarten.

WEBINTERFACE:
T - Web interface refactoren naar Single Page Architecture (SPA), voor html, javascript en css.
	De web interface bestaat nu uit een collectie losse web pagina's, losse javascript en losse css bestanden.
    Nadeel is dat er veel duplicering van html, javascript en styling is tussen deze pagina's.
	Dit heeft als risico dat er (zinloze/onbegrijpelijke) verschillen insluipen voor de gebruiker.
	Het beste is om de web interface te refactoren naar Single Page Architecture (SPA).
	Bijkomend voordeel is ook dat de server, inclusief de fix voor issue #384, eenvoudiger wordt.

CONTROL:
T - Review na alle module wijzigingen.
	oradio_control is meermaals heen en weer geslingerd om (tijdelijke) wijzigingen in modules te accomoderen.
	Zodra die modules gestabiliseerd zijn wordt het tijd om oradio_control na te kijken, op te schonen

2026-02-13 ============================================================================================================================

DEBUG:
remote_debugger.py:
Deze module verzorgt een verbinding van de RPI met een IDE op een PC, zodat remote debugging mogelijk is
R - De setup_remote_debugging() functie kan een verbinding tot stand te brengen.
R - Er zijn een paar pre-condities waaraan voldaan moet worden om wel of geen remote-debug te kunnen:
     - Er is een constante REMOTE_DEBUGGER:
        a) die default op DEBUGGER_DISABLED staat:in dit geval is er geen debugging mogelijk
        b) de ontwikkelaar kan deze op DEBUGGER_ENABLED zetten: debugger gestart worden mbv setup_remote_debugging() functie
     - De remote debugger heeft informatie (argumenten) nodig om een verbinding tot stand te brengen bij aanroep van module
       bijvoorbeeld: python led_control.py -rd yes -ip <ip adres van host> -p <poortnummer van host debugger>

2026-02-13 ============================================================================================================================

GPIO:
T - Documents/GPIO/GPIO module description.docx updaten
V - Global defines toegevoegd/opgeschoond
gpio_service.py:
V - GPIO beheer consolideren, uit led_control en touch_buttons
V - GPIO class is singleton en methods zijn thread-safe.
V - Gebruik Google Docstrings style zoals al in veel ander modules
V - Stand-alone testen verplaatst naar module_test/gpio_service_test.py
led_controls.py:
V - GPIO service methods gebruiken
V - Gebruik Google Docstrings style zoals al in veel ander modules
V - Stand-alone testen verplaatst naar module_test/led_control_test.py
touch_buttons.py:
V - GPIO service methods gebruiken
V - Callbacks naar oradio_control vervangen door messages
V - Gebruik Google Docstrings style zoals al in veel ander modules
V - Click-sound speelt direct af via play_sound() functie, geen instantie meer nodig
V - De klasse OradioMessage() geintroduceerd waarmee de message structuur voor oradio berichten wordt gedefinieerd
V - Een functie validate_oradio_message() die een queue bericht kan valideren op basis van de OradioMessage klasse
V - Stand-alone testen verplaatst naar module_test/touch_buttons_test.py
Stand-alone module test scripts:
V - Een data klasse TimingData geintroduceerd om de statistiek van de tijdsmetingen bij te houden
V - Performance metingen en rapportage toegevoegd
V - Remote debugging toegevoegd voor module testen
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten

2026-01-12============================================================================================================================

USB:
Documents/USB/USB module description.docx:
V - Updated to include handling Wifi_invoer.json
V - De __getattr__() is een private method, zou niet in de API beschrijving van de Module: USBObserver moeten staan
usb_service.py:
V - Parsing van Wifi_invoer.json toegevoegd
V - doc strings, type hints and inline comments opgeschoond
V - Waarom is de __getattr__() nodig? Graag toelichting voor gebruik hiervan
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten

Wifi:
Documents/WIFI/WIFI module description.docx:
V - Updated to include handling Wifi_invoer.json
wifi_service.py:
V - Parsing van Wifi_invoer.json verwijderd
V - doc strings, type hints and inline comments opgeschoond
V - USB functionaliteit is verwijderd, maar er staan nog USB zaken in de code:
V   - self.usb_q wordt niet gebruikt
V   - De locals DEBOUCE_TIME, WIFI_MONITOR en USB_WIFI_FILE worden niet meer gebruikt
V   - docstring: 'Listens to USB xxxxx' is niet aan de orde
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten

2026-01-06============================================================================================================================

AUDIO:
asound.conf:
V - Use 24 bit resolution
V - Use 48 kHz sampling rate
V - Replace equal by EqFA4p
volume_control.py:
V - alsaaudio import, en daarmeer class AlsaVolume is verdwenen
V - __init_ configureert de default MPD, Sounds en Spotify volumes
V - set_volume() gebruikt nu run_shell_script() om volume in te stellen
play_system_sound.py:
V - Default MPD, Sounds en Spotify volumes verhuisd naar volume_control.py
V - "duck en restore" volume regeling verwijderd
V - Class PlaySystemSound is verwijderd
V - Hernoemd naar system_sounds.py
system_sounds.py:
V - play_sound() functie speelt sound asynchroon af
V - Use sound constants
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten

2025-12-07============================================================================================================================

LOGGING:
oradio_logging.py:
V - log methods safe gemaakt met wrappers dei exceptions afvangen
V - versturen van WARNING, ERROR en CRITICAL logs naar remote server toegevoegd
V - onafhankelijk gemaakt van andere oradio modules
V - Technische documnetatie bijgewerkt
remote_monitoring.py:
V - Versturen van WARNING, ERROR en CRITICAL logs naar remote server verwijderd
V - Beheren van HEARTBEAT en SYS_LOG messages afhankelijk gemaakt vna wifi state
V - Technische documnetatie bijgewerkt
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten

2025-11-18============================================================================================================================

I2C:
V Review Documents/I2C/I2C_modules_description.docx
volume_control review:
V - AlsaVolume.set() VolumeControl._set_volume() geven nu True/False terug. Wordt in manager bewust genegeerd.
V - De de exception komt als mixer_name niet bestaat, of initialisatie mislukt -> Extra comments toegevoegd aan AlsaVolume::__init__ in volumne_control.py
V - raw_value range is niet beperkt, want wordt in method geclamped
V - Ontbrekende foutmelding -> toegevoegd
V - Zie punt 1
V - Zie punt 1
V - errors propageren nu niet, worden alleen gelogd. Zie issue #408
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten.
backligting.py review:
V - Het is een vrij theoretisch geval: EEPROMS hebben een beperkt aantal write cycles.
      Nu wordt de EEPROM elke keer als Oradio en backlighting start geschreven.
	  Het is strikt genomen voldoende als dit eenmalig bij configuratie van Oradio gedaan wordt, dus in oradio_install.sh.
	  Maar omdat EEPROM schrijfbeperking bij 40-50000 cycles ligt hoeven we ons daar niet echt druk over te maken.
	  Kortom: we laten het in Backlighting::__init__ zitten. Eens?
V - de stop() method docstring is niet correct: Stop the Backlight manager ipv volume control. Gecorrigeerd
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten.
i2c_service.py review:
V - Reworked: een retry mechanisme voor write_byte() en write_block() toegevoegd
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten

2025-11-10============================================================================================================================

MPD:
mpd_service.py:
V - Verhuis MPDService naar eigen file mpd_service.py, laat mpd_control.py en mpd_monitor.py die importeren
mpd_control.py:
V - mpd_client singleton moet eruit
V - Gebruik 'Singleton metaclass' in mpd_control.py
V - functies die waarde retourneren maar deze genegeerd wordt moeten _ = <functie>  gebruiken om te laten zien dat negeren bewust is
V - Probleem in _remove_song_when_finished(), met een if conditie waarbij een int() met een string vergeleken wordt: de "deleteid" wordt niet uitgevoerd
V - Hetzelfde probleem in play_song(), ook een int()/String compare. Graag ook de single-line-code minder complex maken door meerdere code regels er aan te wijden. De code is dan beter leesbaar en te begrijpen. Ik heb voorbeeld toegevoegd.
V - Probleem met twee self._execute() die bij elkaar gevoegd worden. Gaat fout als er None terugkomt==> TypeError
V - Groene tekst als een module test optie een succes oplevert.
mpd:monitor.py:
V - Listener moet aparte singleton class worden
V - functies die waarde retourneren maar deze genegeerd wordt moeten _ = <functie>  gebruiken om te laten zien dat negeren bewust is
V - Gebruik 'Singleton metaclass' in mpd_monitor.py
V - Groene tekst als een module test optie een succes oplevert.
=> Review/Rework conclusie: Rework akkoord. Hiermee is review afgesloten.